@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    /* Tipografías de Google Fonts */
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Montserrat:wght@600;700;800&display=swap');

    html {
        scroll-behavior: smooth;
    }

    /* Font Size Accessibility */
    html.font-size-small { font-size: 14px; }
    html.font-size-normal { font-size: 16px; }
    html.font-size-large { font-size: 18px; }
    html.font-size-xlarge { font-size: 20px; }

    body {
        @apply font-sans text-body bg-light-secondary text-dark-primary;
        @apply dark:bg-dark-primary dark:text-light-primary;
    }

    h1, h2, h3, h4, h5, h6 {
        @apply font-heading font-bold;
    }
}

@layer components {
    /* Botones */
    .btn-primary {
        @apply bg-trama-red text-white px-6 py-2 rounded-lg font-semibold;
        @apply hover:bg-trama-red-dark transition-colors duration-200;
        @apply focus:ring-2 focus:ring-trama-red focus:ring-offset-2;
    }

    .btn-secondary {
        @apply bg-dark-primary text-white px-6 py-2 rounded-lg font-semibold;
        @apply hover:bg-dark-secondary transition-colors duration-200;
        @apply dark:bg-light-secondary dark:text-dark-primary dark:hover:bg-light-accent;
    }

    /* Cards de noticias */
    .news-card {
        @apply bg-white rounded-lg overflow-hidden shadow-sm;
        @apply hover:shadow-md transition-shadow duration-200;
        @apply dark:bg-dark-secondary;
    }

    /* Etiquetas de categoría */
    .category-tag {
        @apply inline-block px-3 py-1 text-xs font-semibold uppercase tracking-wider;
        @apply bg-trama-red text-white rounded;
    }

    /* Contenedor principal */
    .container-main {
        @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
    }

    /* ================================
       BENTO GRID
       ================================ */
    .bento-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 1rem;
    }

    @media (min-width: 768px) {
        .bento-grid {
            grid-template-columns: repeat(2, 1fr);
            grid-auto-rows: minmax(200px, auto);
        }

        .bento-featured {
            grid-column: span 2;
            grid-row: span 2;
            min-height: 450px;
        }

        .bento-tall {
            grid-row: span 2;
        }
    }

    @media (min-width: 1024px) {
        .bento-grid {
            grid-template-columns: repeat(3, 1fr);
        }

        .bento-featured {
            grid-column: span 2;
        }
    }

    .bento-item {
        @apply relative overflow-hidden rounded-xl;
        @apply bg-white dark:bg-dark-secondary;
    }

    .bento-featured {
        @apply shadow-lg;
    }

    .bento-card {
        @apply shadow-sm hover:shadow-xl transition-all duration-300;
    }

    /* ================================
       TIPOGRAFIA CINETICA
       ================================ */
    .bento-title {
        @apply transition-all duration-300;
    }

    .group:hover .bento-title {
        @apply tracking-wide;
        transform: translateX(4px);
    }

    /* Underline animado para links */
    .animated-underline {
        @apply relative;
    }

    .animated-underline::after {
        content: '';
        @apply absolute bottom-0 left-0 w-0 h-0.5 bg-trama-red;
        @apply transition-all duration-300;
    }

    .animated-underline:hover::after {
        @apply w-full;
    }

    /* ================================
       BARRA DE PROGRESO DE LECTURA
       ================================ */
    .reading-progress {
        @apply fixed top-0 left-0 h-1 bg-trama-red z-[100];
        width: 0%;
        transition: width 0.1s ease-out;
    }

    /* ================================
       SCROLL TO TOP
       ================================ */
    .scroll-to-top {
        @apply fixed bottom-6 right-6 z-50;
        @apply w-12 h-12 rounded-full;
        @apply bg-trama-red text-white shadow-lg;
        @apply flex items-center justify-center;
        @apply opacity-0 invisible translate-y-4;
        @apply hover:bg-trama-red-dark hover:scale-110;
        @apply transition-all duration-300;
    }

    .scroll-to-top.visible {
        @apply opacity-100 translate-y-0;
        visibility: visible;
    }

    /* ================================
       REACCIONES
       ================================ */
    .reaction-btn {
        @apply flex flex-col items-center gap-1 px-4 py-3 rounded-xl;
        @apply bg-gray-100 dark:bg-dark-accent;
        @apply hover:bg-gray-200 dark:hover:bg-dark-secondary;
        @apply transition-all duration-200;
        @apply cursor-pointer select-none;
    }

    .reaction-btn:active {
        transform: scale(0.95);
    }

    .reaction-btn.active {
        @apply bg-trama-red/10 ring-2 ring-trama-red;
    }

    .reaction-btn .emoji {
        @apply text-2xl transition-transform duration-200;
    }

    .reaction-btn:hover .emoji {
        transform: scale(1.2);
    }

    .reaction-btn.pop .emoji {
        animation: pop 0.3s ease-out;
    }

    @keyframes pop {
        0% { transform: scale(1); }
        50% { transform: scale(1.4); }
        100% { transform: scale(1.2); }
    }

    /* ================================
       LISTA DE LECTURA (BOOKMARK)
       ================================ */
    .bookmark-btn {
        @apply p-2 rounded-full;
        @apply bg-white/80 dark:bg-dark-primary/80 backdrop-blur-sm;
        @apply hover:bg-white dark:hover:bg-dark-primary;
        @apply transition-all duration-200;
        @apply shadow-sm hover:shadow-md;
    }

    .bookmark-btn.saved {
        @apply bg-trama-red text-white;
        @apply hover:bg-trama-red-dark;
    }

    .bookmark-btn svg {
        @apply w-5 h-5 transition-transform duration-200;
    }

    .bookmark-btn:hover svg {
        transform: scale(1.1);
    }

    /* ================================
       TOAST NOTIFICATIONS
       ================================ */
    .toast {
        @apply fixed bottom-6 left-1/2 -translate-x-1/2 z-[200];
        @apply px-6 py-3 rounded-full shadow-xl;
        @apply bg-dark-primary text-white;
        @apply flex items-center gap-2;
        @apply opacity-0 translate-y-4;
        @apply transition-all duration-300;
    }

    .toast.show {
        @apply opacity-100 translate-y-0;
    }

    /* ================================
       SKELETON LOADERS
       ================================ */
    .skeleton {
        @apply bg-gray-200 dark:bg-dark-accent rounded;
        background: linear-gradient(90deg,
            theme('colors.gray.200') 25%,
            theme('colors.gray.100') 50%,
            theme('colors.gray.200') 75%
        );
        background-size: 200% 100%;
        animation: skeleton-shimmer 1.5s infinite;
    }

    .dark .skeleton {
        background: linear-gradient(90deg,
            theme('colors.dark.accent') 25%,
            theme('colors.dark.secondary') 50%,
            theme('colors.dark.accent') 75%
        );
        background-size: 200% 100%;
    }

    @keyframes skeleton-shimmer {
        0% { background-position: 200% 0; }
        100% { background-position: -200% 0; }
    }

    .skeleton-text {
        @apply h-4 rounded;
    }

    .skeleton-text-sm {
        @apply h-3 rounded;
    }

    .skeleton-text-lg {
        @apply h-6 rounded;
    }

    .skeleton-avatar {
        @apply rounded-full;
    }

    .skeleton-image {
        @apply w-full rounded-lg;
    }

    .skeleton-card {
        @apply bg-white dark:bg-dark-secondary rounded-xl overflow-hidden;
    }

    /* Image skeleton while loading */
    .img-skeleton {
        @apply relative overflow-hidden;
    }

    .img-skeleton::before {
        content: '';
        @apply absolute inset-0 z-10;
        background: linear-gradient(90deg,
            theme('colors.gray.200') 25%,
            theme('colors.gray.100') 50%,
            theme('colors.gray.200') 75%
        );
        background-size: 200% 100%;
        animation: skeleton-shimmer 1.5s infinite;
    }

    .dark .img-skeleton::before {
        background: linear-gradient(90deg,
            theme('colors.dark.accent') 25%,
            theme('colors.dark.secondary') 50%,
            theme('colors.dark.accent') 75%
        );
        background-size: 200% 100%;
    }

    .img-skeleton.loaded::before {
        @apply opacity-0;
        transition: opacity 0.3s ease-out;
    }

    /* Page content fade-in */
    .content-fade-in {
        animation: contentFadeIn 0.5s ease-out;
    }

    @keyframes contentFadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Staggered animation for grid items */
    .stagger-fade-in > * {
        opacity: 0;
        animation: contentFadeIn 0.4s ease-out forwards;
    }

    .stagger-fade-in > *:nth-child(1) { animation-delay: 0.05s; }
    .stagger-fade-in > *:nth-child(2) { animation-delay: 0.1s; }
    .stagger-fade-in > *:nth-child(3) { animation-delay: 0.15s; }
    .stagger-fade-in > *:nth-child(4) { animation-delay: 0.2s; }
    .stagger-fade-in > *:nth-child(5) { animation-delay: 0.25s; }
    .stagger-fade-in > *:nth-child(6) { animation-delay: 0.3s; }
    .stagger-fade-in > *:nth-child(7) { animation-delay: 0.35s; }
    .stagger-fade-in > *:nth-child(8) { animation-delay: 0.4s; }

    /* ================================
       CONFETTI ANIMATION
       ================================ */
    @keyframes confetti-fall {
        0% {
            transform: translateY(0) rotate(0deg);
            opacity: 1;
        }
        100% {
            transform: translateY(100px) rotate(720deg);
            opacity: 0;
        }
    }

    .confetti {
        @apply absolute pointer-events-none;
        animation: confetti-fall 1s ease-out forwards;
    }

    /* ================================
       PAGINATION
       ================================ */
    .pagination-wrapper {
        @apply flex justify-center;
    }

    .pagination-wrapper nav {
        @apply flex items-center gap-1;
    }

    .pagination-wrapper .page-item {
        @apply inline-flex;
    }

    .pagination-wrapper .page-link,
    .pagination-wrapper span[aria-current="page"] span {
        @apply min-w-[40px] h-10 px-3 flex items-center justify-center;
        @apply text-sm font-medium rounded-lg;
        @apply transition-all duration-200;
    }

    .pagination-wrapper .page-link {
        @apply bg-white dark:bg-dark-secondary text-gray-700 dark:text-gray-300;
        @apply border border-gray-200 dark:border-dark-accent;
        @apply hover:bg-trama-red hover:text-white hover:border-trama-red;
        @apply hover:scale-105 hover:shadow-md;
    }

    .pagination-wrapper span[aria-current="page"] span {
        @apply bg-trama-red text-white border border-trama-red;
        @apply shadow-md;
    }

    .pagination-wrapper .page-link[rel="prev"],
    .pagination-wrapper .page-link[rel="next"] {
        @apply px-4;
    }

    .pagination-wrapper .page-item.disabled .page-link {
        @apply opacity-50 cursor-not-allowed;
        @apply hover:bg-white dark:hover:bg-dark-secondary;
        @apply hover:text-gray-700 dark:hover:text-gray-300;
        @apply hover:border-gray-200 dark:hover:border-dark-accent;
        @apply hover:scale-100 hover:shadow-none;
    }

    /* Tailwind default pagination overrides */
    nav[role="navigation"] {
        @apply flex items-center justify-between;
    }

    nav[role="navigation"] .relative.inline-flex {
        @apply gap-1;
    }

    nav[role="navigation"] a,
    nav[role="navigation"] span {
        @apply relative inline-flex items-center justify-center;
        @apply min-w-[40px] h-10 px-3;
        @apply text-sm font-medium rounded-lg;
        @apply transition-all duration-200;
    }

    nav[role="navigation"] a:not([rel]) {
        @apply bg-white dark:bg-dark-secondary text-gray-700 dark:text-gray-300;
        @apply border border-gray-200 dark:border-dark-accent;
        @apply hover:bg-trama-red hover:text-white hover:border-trama-red;
        @apply hover:scale-105 hover:shadow-md;
    }

    nav[role="navigation"] span[aria-current="page"] span,
    nav[role="navigation"] span.bg-white {
        @apply bg-trama-red text-white border border-trama-red shadow-md;
    }

    nav[role="navigation"] a[rel="prev"],
    nav[role="navigation"] a[rel="next"] {
        @apply bg-white dark:bg-dark-secondary text-gray-700 dark:text-gray-300;
        @apply border border-gray-200 dark:border-dark-accent;
        @apply hover:bg-trama-red hover:text-white hover:border-trama-red;
        @apply hover:scale-105 hover:shadow-md;
    }

    nav[role="navigation"] span[aria-disabled="true"] span {
        @apply bg-gray-100 dark:bg-dark-accent text-gray-400 dark:text-gray-600;
        @apply border border-gray-200 dark:border-dark-accent;
        @apply cursor-not-allowed;
    }

    /* Hide "Showing X to Y" text on mobile */
    nav[role="navigation"] > div:first-child > p {
        @apply hidden sm:block text-sm text-gray-600 dark:text-gray-400;
    }
}
